{"ast":null,"code":"import { call, put, takeEvery } from 'redux-saga/effects';\nimport { GET_ITEMS_CREATOR, GET_MORE_ITEMS_CREATOR, ITEMS, LOAD_MORE_ITEMS_BUTTON_IS_DISABLED, LOADING, MORE_ITEMS } from \"./Layout/LayoutConstants\";\nimport { LOGIN_CREATOR, REGISTER_CREATOR } from \"./Auth/AuthConstants\";\nimport { getItemsInfo, login, register } from \"../utils/api\";\nimport { success, error } from \"../utils/helpers/infoMessages\";\nimport { redirect } from \"../utils/helpers/functions\";\nexport function* sagaWatcher() {\n  yield takeEvery(GET_ITEMS_CREATOR, getItemsWorker);\n  yield takeEvery(GET_MORE_ITEMS_CREATOR, getMoreItemsWorker);\n  yield takeEvery(REGISTER_CREATOR, registerWorker);\n  yield takeEvery(LOGIN_CREATOR, loginWorker);\n}\n\nfunction* getItemsWorker(data) {\n  const {\n    resource,\n    page\n  } = data.payload;\n\n  try {\n    yield put({\n      type: LOADING,\n      payload: true\n    });\n    const items = yield call(getItemsInfo, {\n      resource,\n      page\n    });\n    yield put({\n      type: ITEMS,\n      payload: items.data.results\n    });\n  } catch (e) {\n    error('Something is wrong');\n  } finally {\n    yield put({\n      type: LOADING,\n      payload: false\n    });\n  }\n}\n\nfunction* getMoreItemsWorker(data) {\n  const {\n    resource,\n    page\n  } = data.payload;\n\n  try {\n    yield put({\n      type: LOADING,\n      payload: true\n    });\n    const items = yield call(getItemsInfo, {\n      resource,\n      page\n    });\n    if (!items.data.next) yield put({\n      type: LOAD_MORE_ITEMS_BUTTON_IS_DISABLED,\n      payload: true\n    });\n    yield put({\n      type: MORE_ITEMS,\n      payload: items.data.results\n    });\n  } catch (e) {\n    error('Something is wrong');\n  } finally {\n    yield put({\n      type: LOADING,\n      payload: false\n    });\n  }\n}\n\nfunction* registerWorker(data) {\n  const {\n    formData,\n    history\n  } = data.payload;\n\n  try {\n    yield put({\n      type: LOADING,\n      payload: true\n    });\n    yield call(register, {\n      formData\n    });\n    yield call(login, {\n      formData\n    });\n    localStorage.setItem(\"isAuth\", true);\n    success('You successfully register and login');\n    redirect('/people', history);\n  } catch (e) {\n    error(e.response.data.message);\n  } finally {\n    yield put({\n      type: LOADING,\n      payload: false\n    });\n  }\n}\n\nfunction* loginWorker(data) {\n  const {\n    formData,\n    history\n  } = data.payload;\n\n  try {\n    yield put({\n      type: LOADING,\n      payload: true\n    });\n    yield call(login, {\n      formData\n    });\n    success('You successfully login');\n    redirect('/people', history);\n  } catch (e) {\n    error(e.response.data.message);\n  } finally {\n    yield put({\n      type: LOADING,\n      payload: false\n    });\n  }\n}","map":{"version":3,"sources":["E:/Projects/react-project/src/redux/Sagas.js"],"names":["call","put","takeEvery","GET_ITEMS_CREATOR","GET_MORE_ITEMS_CREATOR","ITEMS","LOAD_MORE_ITEMS_BUTTON_IS_DISABLED","LOADING","MORE_ITEMS","LOGIN_CREATOR","REGISTER_CREATOR","getItemsInfo","login","register","success","error","redirect","sagaWatcher","getItemsWorker","getMoreItemsWorker","registerWorker","loginWorker","data","resource","page","payload","type","items","results","e","next","formData","history","localStorage","setItem","response","message"],"mappings":"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","sourcesContent":["import {call, put, takeEvery} from 'redux-saga/effects'\r\nimport {\r\n    GET_ITEMS_CREATOR,\r\n    GET_MORE_ITEMS_CREATOR,\r\n    ITEMS,\r\n    LOAD_MORE_ITEMS_BUTTON_IS_DISABLED,\r\n    LOADING,\r\n    MORE_ITEMS\r\n} from \"./Layout/LayoutConstants\";\r\nimport {LOGIN_CREATOR, REGISTER_CREATOR} from \"./Auth/AuthConstants\";\r\nimport {getItemsInfo, login, register} from \"../utils/api\";\r\nimport {success, error} from \"../utils/helpers/infoMessages\";\r\nimport {redirect} from \"../utils/helpers/functions\";\r\n\r\nexport function* sagaWatcher() {\r\n    yield takeEvery(GET_ITEMS_CREATOR, getItemsWorker)\r\n    yield takeEvery(GET_MORE_ITEMS_CREATOR, getMoreItemsWorker)\r\n    yield takeEvery(REGISTER_CREATOR, registerWorker)\r\n    yield takeEvery(LOGIN_CREATOR, loginWorker)\r\n}\r\n\r\nfunction* getItemsWorker(data) {\r\n    const {resource, page} = data.payload\r\n    try {\r\n        yield put({type: LOADING, payload: true})\r\n        const items = yield call(getItemsInfo, {resource, page})\r\n        yield put({type: ITEMS, payload: items.data.results})\r\n\r\n    } catch (e) {\r\n        error('Something is wrong')\r\n    } finally {\r\n        yield put({type: LOADING, payload: false})\r\n    }\r\n}\r\n\r\nfunction* getMoreItemsWorker(data) {\r\n    const {resource, page} = data.payload\r\n    try {\r\n        yield put({type: LOADING, payload: true})\r\n        const items = yield call(getItemsInfo, {resource, page})\r\n        if (!items.data.next)\r\n            yield put({type: LOAD_MORE_ITEMS_BUTTON_IS_DISABLED, payload: true})\r\n        yield put({type: MORE_ITEMS, payload: items.data.results})\r\n\r\n    } catch (e) {\r\n        error('Something is wrong')\r\n    } finally {\r\n        yield put({type: LOADING, payload: false})\r\n    }\r\n}\r\n\r\nfunction* registerWorker(data) {\r\n    const {formData, history} = data.payload\r\n    try {\r\n        yield put({type: LOADING, payload: true})\r\n        yield call(register, {formData})\r\n        yield call(login, {formData})\r\n        localStorage.setItem(\"isAuth\", true);\r\n        success('You successfully register and login')\r\n        redirect('/people', history)\r\n    } catch (e) {\r\n        error(e.response.data.message)\r\n    } finally {\r\n        yield put({type: LOADING, payload: false})\r\n    }\r\n}\r\n\r\nfunction* loginWorker(data) {\r\n    const {formData, history} = data.payload\r\n    try {\r\n        yield put({type: LOADING, payload: true})\r\n        yield call(login, {formData})\r\n        success('You successfully login')\r\n        redirect('/people', history)\r\n    } catch (e) {\r\n        error(e.response.data.message)\r\n    } finally {\r\n        yield put({type: LOADING, payload: false})\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}